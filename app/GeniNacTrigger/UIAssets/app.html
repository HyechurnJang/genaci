<!DOCTYPE html>
<meta charset="utf-8">

<!-- Style -->
<link rel="stylesheet" type="text/css" href="style.css">

<!-- Import of Javascript files -->
<!-- ext framework is available from the APIC -->
<script type="text/javascript" src="/extjs/ext-all-debug.js"></script>

<!-- Token management-->

<!--
  Get the tokens at first launch.

  When the app is first launched, the tokens are contained is a cookies, named
  app_VENDORDOMAIN_APPID_token and app_VENDORDOMAIN_APPID_urlToken.
  In this case, we're using Ext to retrieve those tokens and put them into
  window.APIC_DEV_COOKIE and window.APIC_URL_TOKEN.
-->
<script type="text/javascript">
  window.APIC_DEV_COOKIE = Ext.util.Cookies.get("app_Ciscokr_GeniNacTrigger_token");
  window.APIC_URL_TOKEN =  Ext.util.Cookies.get("app_Ciscokr_GeniNacTrigger_urlToken");
</script>

<!-- 
  Handle the refresh of the tokens.

  This will automatically update window.APIC_DEV_COOKIE and window.APIC_URL_TOKEN
  when the APIC sends new tokens to the application.
-->
<script type="text/javascript">
  window.addEventListener('message', function (e) {
    if (e.source === window.parent) {
        var tokenObj = Ext.decode(e.data, true);
        if (tokenObj) {
            window.APIC_DEV_COOKIE = tokenObj.token;
            window.APIC_URL_TOKEN = tokenObj.urlToken;
        }
    }
  });
</script>

<!-- Main logic / visualization -->

<body>
    <div id="genaci-container">
    Hello GenACI
    </div>
</body>
</html>
